#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ Git –∏ –¥–µ–ø–ª–æ—è –Ω–∞ GitHub Pages

set -e

echo "üöÄ –ù–∞—á–∏–Ω–∞—é —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ Git –∏ –¥–µ–ø–ª–æ–π –Ω–∞ GitHub Pages..."

cd "$(dirname "$0")"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
if [ ! -f "package.json" ]; then
  echo "‚ùå –û—à–∏–±–∫–∞: package.json –Ω–µ –Ω–∞–π–¥–µ–Ω."
  exit 1
fi

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º git, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
if [ ! -d ".git" ]; then
  echo "üì¶ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π..."
  git init
fi

# –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
echo "üìù –î–æ–±–∞–≤–ª—è—é –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è..."
git add -A

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å
echo ""
echo "üìä –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–µ–Ω–∏–π:"
git status --short

# –°–æ–∑–¥–∞–µ–º –∫–æ–º–º–∏—Ç
echo ""
echo "üíæ –°–æ–∑–¥–∞—é –∫–æ–º–º–∏—Ç..."
git commit -m "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI: –±–ª–æ–∫–∏ –ö–ë–ñ–£ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫, —Å—Ç–∏–ª–∏ –∫–Ω–æ–ø–æ–∫, –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö API

- –ë–ª–æ–∫–∏ –ö–ë–ñ–£ –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ —Ä–µ—Ü–µ–ø—Ç–æ–≤ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ –∏ –ø–æ —Ü–µ–Ω—Ç—Ä—É
- –ù–∞–∑–≤–∞–Ω–∏—è –ö–ë–ñ–£ –≤—ã–Ω–µ—Å–µ–Ω—ã –Ω–∞–¥ –±–ª–æ–∫–∞–º–∏, —Ü–∏—Ñ—Ä—ã –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫ –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ —Ä–µ—Ü–µ–ø—Ç–æ–≤
- –ò–∫–æ–Ω–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä—è–¥–æ–º —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º '–ó–∞–º–µ—Ç–∫–∞'
- –£–ª—É—á—à–µ–Ω—ã —Å—Ç–∏–ª–∏ –∫–Ω–æ–ø–æ–∫ (border-radius 12px)
- –û—Ç–∫–ª—é—á–µ–Ω—ã –≤–Ω–µ—à–Ω–∏–µ API (Open Food Facts / USDA)
- –°–æ–∑–¥–∞–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–∞—è —Å–ø—Ä–∞–≤–æ—á–Ω–∞—è –±–∞–∑–∞ –∏–∑ 30 –±–∞–∑–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ Supabase (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∞–±–ª–∏—Ü)" || echo "‚ö†Ô∏è  –ö–æ–º–º–∏—Ç –Ω–µ —Å–æ–∑–¥–∞–Ω (–≤–æ–∑–º–æ–∂–Ω–æ, –Ω–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π)"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
echo ""
echo "üîç –ü—Ä–æ–≤–µ—Ä—è—é —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π..."
if git remote | grep -q origin; then
  REMOTE_URL=$(git remote get-url origin)
  echo "‚úÖ –ù–∞–π–¥–µ–Ω —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: $REMOTE_URL"
  
  # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–∫—É—â—É—é –≤–µ—Ç–∫—É
  CURRENT_BRANCH=$(git branch --show-current 2>/dev/null || echo "main")
  if [ -z "$CURRENT_BRANCH" ]; then
    CURRENT_BRANCH="main"
    git branch -M main 2>/dev/null || true
  fi
  
  echo "üì§ –û—Ç–ø—Ä–∞–≤–ª—è—é –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–µ—Ç–∫—É $CURRENT_BRANCH..."
  git push -u origin "$CURRENT_BRANCH" 2>&1 || {
    echo "‚ö†Ô∏è  –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏."
    echo ""
    echo "–í—ã–ø–æ–ª–Ω–∏ –≤—Ä—É—á–Ω—É—é:"
    echo "  git push -u origin $CURRENT_BRANCH"
  }
else
  echo "‚ö†Ô∏è  –£–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω."
  echo ""
  echo "–î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã–ø–æ–ª–Ω–∏:"
  echo "  git remote add origin https://github.com/–¢–í–û–ô_USERNAME/POTOK.git"
  echo "  git branch -M main"
  echo "  git push -u origin main"
fi

echo ""
echo "‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ Git!"
echo ""
echo "üåê GitHub Pages:"
echo "–ï—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω GitHub Actions, –¥–µ–ø–ª–æ–π –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏."
echo "–ü—Ä–æ–≤–µ—Ä—å –≤–∫–ª–∞–¥–∫—É 'Actions' –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∞ GitHub."

