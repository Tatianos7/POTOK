# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–∑—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤ - –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –º–æ–¥–µ–ª—å

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

**–û–±–Ω–æ–≤–ª–µ–Ω `FoodSource`:**
```typescript
export type FoodSource = 
  | 'open_food_facts'  // Open Food Facts (–æ—Ç–∫—Ä—ã—Ç–∞—è –±–∞–∑–∞)
  | 'usda'             // USDA (–æ—Ç–∫—Ä—ã—Ç–∞—è –±–∞–∑–∞)
  | 'user'             // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ–¥—É–∫—Ç
  | 'partner'          // –ë—É–¥—É—â–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫: –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
  | 'imported';        // –ë—É–¥—É—â–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫: –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```

**–û–±–Ω–æ–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Food`:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ `source: FoodSource`
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `created_by_user_id?: string | null` –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤

### 2. –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Supabase

–°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `supabase/foods_schema.sql` —Å:
- –¢–∞–±–ª–∏—Ü–µ–π `foods` —Å –ø–æ–ª—è–º–∏ `source` –∏ `created_by_user_id`
- Row Level Security (RLS) –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏:
  - –í—Å–µ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–µ –±–∞–∑—ã (`open_food_facts`, `usda`)
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –ø—Ä–æ–¥—É–∫—Ç—ã (`source='user'`)
- –ò–Ω–¥–µ–∫—Å–∞–º–∏ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞

### 3. –°–µ—Ä–≤–∏—Å –ø–æ–∏—Å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

**–û–±–Ω–æ–≤–ª–µ–Ω `foodService`:**
- –ú–µ—Ç–æ–¥ `search()` —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `userId` –∏ –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `searchGrouped()` –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–æ–∏—Å–∫–∞

### 4. UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**–û–±–Ω–æ–≤–ª–µ–Ω `ProductSearch`:**
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –Ω–∞:
  - **"–í–∞—à–∏ –ø—Ä–æ–¥—É–∫—Ç—ã"** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã (`source='user'`)
  - **"–û–±—â–∞—è –±–∞–∑–∞"** - –æ—Ç–∫—Ä—ã—Ç—ã–µ –±–∞–∑—ã (`open_food_facts`, `usda`, –∏ —Ç.–¥.)

**–û–±–Ω–æ–≤–ª–µ–Ω `FoodSearch`:**
- –ü–µ—Ä–µ–¥–∞–µ—Ç `userId` –≤ –ø–æ–∏—Å–∫ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤

### 5. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤

**–û–±–Ω–æ–≤–ª–µ–Ω—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤:**
- `CreateCustomProductPage` –∏ `CreateBrandProductPage` –∏—Å–ø–æ–ª—å–∑—É—é—Ç `source='user'`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `created_by_user_id = userId`

## üìã –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### ‚úÖ –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ

1. **–í—Å–µ –ø—Ä–æ–¥—É–∫—Ç—ã –∏–º–µ—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ `source`**
   - –ß–µ—Ç–∫–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
   - –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞

2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã**
   - –í–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç–µ–ª—é (`created_by_user_id`)
   - –ù–µ —Å–º–µ—à–∏–≤–∞—é—Ç—Å—è —Å –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ –±–∞–∑–∞–º–∏

3. **–û—Ç–∫—Ä—ã—Ç—ã–µ –±–∞–∑—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º**
   - `open_food_facts` –∏ `usda` - –æ—Ç–∫—Ä—ã—Ç—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–∞–∫ —Å–ø—Ä–∞–≤–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

4. **–ù–µ —Ö—Ä–∞–Ω–∏–º —á—É–∂–∏–µ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –±–∞–∑—ã**
   - –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π –±—Ä–µ–Ω–¥–æ–≤
   - –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –∑–∞–ø–∏—Å–∏

### ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

1. **–õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏**
   - –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø –≤ `FoodSource`
   - –õ–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è

2. **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –±—É–¥—É—â–∏–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º**
   - `partner` - –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
   - `imported` - –¥–ª—è –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### ‚úÖ UX

1. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏
   - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –≤–∏–∑—É–∞–ª—å–Ω–æ —Ä–∞–∑–¥–µ–ª—è–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∏

2. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç, –∫–∞–∫–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã –µ–≥–æ, –∞ –∫–∞–∫–∏–µ –∏–∑ –æ–±—â–µ–π –±–∞–∑—ã
   - –ù–µ—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –±—Ä–µ–Ω–¥–æ–≤ –≤ UI

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∞–∑—ã:
- –°—Ç–∞—Ä—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –±–µ–∑ `source` –ø–æ–ª—É—á–∞—é—Ç `source='open_food_facts'`
- –ü—Ä–æ–¥—É–∫—Ç—ã —Å `source='manual'` –º–∏–≥—Ä–∏—Ä—É—é—Ç –≤ `source='user'`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `created_by_user_id` –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Supabase**
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Å —Ç–∞–±–ª–∏—Ü–µ–π `foods`
   - –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –±–∞–∑ —á–µ—Ä–µ–∑ API

2. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤**
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Open Food Facts API
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ USDA API
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞**
   - –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –≤ Supabase
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Å–∏–Ω–æ–Ω–∏–º–æ–≤

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ù–µ —É–ø–æ–º–∏–Ω–∞—Ç—å –±—Ä–µ–Ω–¥—ã –≤ UI**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏: "–û–±—â–∞—è –±–∞–∑–∞", "–í–∞—à–∏ –ø—Ä–æ–¥—É–∫—Ç—ã"
   - –ù–µ —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (Open Food Facts, USDA) –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

2. **–î–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –∫–∞–∫ —Å–ø—Ä–∞–≤–æ—á–Ω—ã–µ**
   - –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ö–ë–ñ–£
   - –ù–µ—Ç –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —á—É–∂–∏—Ö –±–∞–∑

3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
   - –ú–æ–≥—É—Ç –±—ã—Ç—å —É–¥–∞–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç–µ–ª–µ–º

