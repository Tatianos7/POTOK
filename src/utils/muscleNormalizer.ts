/**
 * Словарь нормализации названий мышц
 * Приводит все варианты написания к единому стандарту
 */

export interface MuscleNormalizationMap {
  [key: string]: string;
}

// Основной словарь нормализации мышц
export const MUSCLE_NORMALIZATION_MAP: MuscleNormalizationMap = {
  // Грудь - нормализованные названия
  'Грудь (верх)': 'Верхний пучок',
  'Грудь — верх': 'Верхний пучок',
  'Верхний пучок': 'Верхний пучок',
  
  'Грудь (середина)': 'Средний пучок',
  'Грудь — середина': 'Средний пучок',
  'Средний пучок': 'Средний пучок',
  
  'Грудь (низ)': 'Нижний пучок',
  'Грудь — низ': 'Нижний пучок',
  'Нижний пучок': 'Нижний пучок',
  
  'Грудь': 'Средний пучок', // По умолчанию средний пучок
  
  // Пресс - Прямая (нормализованные)
  'Прямая мышца живота': 'Прямая — верх',
  'Прямая мышца — верх': 'Прямая — верх',
  'Прямая мышца живота-верх': 'Прямая — верх',
  'Прямая (верхняя часть)': 'Прямая — верх',
  'Прямая': 'Прямая — верх', // По умолчанию верхняя часть (если контекст не указан)
  
  'Прямая мышца — низ': 'Прямая — низ',
  'Прямая мышца живота-низ': 'Прямая — низ',
  'Прямая (нижняя часть)': 'Прямая — низ',
  
  // Пресс - Поперечная (нормализованные)
  'Поперечная мышца живота': 'Поперечная',
  'Поперечная': 'Поперечная',
  'Поперечные': 'Поперечная',
  
  // Пресс - Косые (нормализованные)
  'Косые мышцы': 'Косые',
  'Косые': 'Косые',
  'Косая': 'Косые',
  
  // Пресс - Кор
  'Кор': 'Кор',
  'Нижний кор': 'Нижний кор',
  
  // Разгибатели спины (оставляем как есть)
  'Разгибатели спины': 'Разгибатели спины',
  
  // Остальные мышцы оставляем без изменений
};

/**
 * Нормализует название мышцы
 * @param muscleName - исходное название мышцы
 * @returns нормализованное название
 */
export function normalizeMuscleName(muscleName: string): string {
  if (!muscleName) return muscleName;
  
  const trimmed = muscleName.trim();
  const normalized = MUSCLE_NORMALIZATION_MAP[trimmed] || trimmed;
  
  return normalized;
}

/**
 * Нормализует массив названий мышц, убирая дубликаты после нормализации
 * @param muscleNames - массив названий мышц
 * @returns массив уникальных нормализованных названий
 */
export function normalizeMuscleNames(muscleNames: string[]): string[] {
  const normalized = muscleNames.map(normalizeMuscleName);
  return Array.from(new Set(normalized));
}

/**
 * Проверяет, являются ли два названия мышц синонимами
 * @param name1 - первое название
 * @param name2 - второе название
 * @returns true, если названия нормализуются к одному значению
 */
export function areMuscleNamesSynonymous(name1: string, name2: string): boolean {
  return normalizeMuscleName(name1) === normalizeMuscleName(name2);
}

