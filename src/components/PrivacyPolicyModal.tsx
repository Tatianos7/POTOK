import { X } from 'lucide-react';

interface PrivacyPolicyModalProps {
  isOpen: boolean;
  onClose: () => void;
}

const PrivacyPolicyModal = ({ isOpen, onClose }: PrivacyPolicyModalProps) => {
  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4">
      <div className="bg-white dark:bg-gray-900 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col">
        {/* Header */}
        <div className="px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between">
          <h2 className="text-xl font-semibold text-gray-900 dark:text-white">
            Политика конфиденциальности
          </h2>
          <button
            onClick={onClose}
            className="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors"
            aria-label="Закрыть"
          >
            <X className="w-6 h-6 text-gray-700 dark:text-gray-300" />
          </button>
        </div>

        {/* Content */}
        <div className="px-6 py-4 overflow-y-auto flex-1">
          <div className="prose prose-sm max-w-none dark:prose-invert">
            <div className="text-gray-700 dark:text-gray-300 space-y-4 text-sm leading-relaxed">
              <p className="text-xs text-gray-500 dark:text-gray-400 mb-4">
                Дата последнего обновления: {new Date().toLocaleDateString('ru-RU')}
              </p>

              <section>
                <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                  1. Общие положения
                </h3>
                <p>
                  Настоящая Политика конфиденциальности (далее — «Политика») определяет порядок обработки 
                  и защиты персональных данных пользователей мобильного приложения «ПОТОК» (далее — «Приложение»).
                </p>
                <p>
                  Использование Приложения означает безоговорочное согласие пользователя с настоящей Политикой 
                  и указанными в ней условиями обработки его персональной информации.
                </p>
                <p>
                  В случае несогласия с условиями Политики пользователь должен прекратить использование Приложения.
                </p>
              </section>

              <section>
                <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                  2. Оператор персональных данных
                </h3>
                <p>
                  Оператором персональных данных является владелец Приложения, осуществляющий обработку персональных 
                  данных пользователей в соответствии с Федеральным законом от 27.07.2006 № 152-ФЗ 
                  «О персональных данных».
                </p>
              </section>

              <section>
                <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                  3. Категории обрабатываемых персональных данных
                </h3>
                <p>Приложение обрабатывает следующие категории персональных данных:</p>
                <ul className="list-disc list-inside ml-4 space-y-1">
                  <li>Имя, фамилия, отчество</li>
                  <li>Дата рождения и возраст</li>
                  <li>Электронная почта</li>
                  <li>Номер телефона</li>
                  <li>Рост, вес и другие антропометрические данные</li>
                  <li>Данные о питании (дневник питания, продукты, рецепты)</li>
                  <li>Данные о целях и привычках</li>
                  <li>Фотографии (аватар, фото замеров тела, фото рецептов)</li>
                  <li>Технические данные (IP-адрес, тип устройства, версия операционной системы)</li>
                </ul>
              </section>

              <section>
                <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                  4. Цели обработки персональных данных
                </h3>
                <p>Персональные данные обрабатываются в следующих целях:</p>
                <ul className="list-disc list-inside ml-4 space-y-1">
                  <li>Предоставление пользователю доступа к функциональным возможностям Приложения</li>
                  <li>Создание и ведение личного кабинета пользователя</li>
                  <li>Ведение дневника питания и расчёт калорийности</li>
                  <li>Формирование персональных рекомендаций</li>
                  <li>Обработка запросов и обращений пользователей</li>
                  <li>Отправка уведомлений и информационных сообщений</li>
                  <li>Улучшение качества работы Приложения</li>
                  <li>Обеспечение безопасности и предотвращение мошенничества</li>
                </ul>
              </section>

              <section>
                <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                  5. Правовые основания обработки персональных данных
                </h3>
                <p>
                  Обработка персональных данных осуществляется на основании:
                </p>
                <ul className="list-disc list-inside ml-4 space-y-1">
                  <li>Согласия субъекта персональных данных на обработку его персональных данных</li>
                  <li>Федерального закона от 27.07.2006 № 152-ФЗ «О персональных данных»</li>
                  <li>Договора, стороной которого является субъект персональных данных</li>
                </ul>
              </section>

              <section>
                <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                  6. Способы и сроки обработки персональных данных
                </h3>
                <p>
                  Обработка персональных данных осуществляется с использованием средств автоматизации и без использования 
                  таких средств, включая сбор, запись, систематизацию, накопление, хранение, уточнение (обновление, изменение), 
                  извлечение, использование, передачу (распространение, предоставление, доступ), обезличивание, блокирование, 
                  удаление, уничтожение персональных данных.
                </p>
                <p>
                  Персональные данные обрабатываются в течение срока, необходимого для достижения целей обработки, 
                  или до момента отзыва согласия на обработку персональных данных пользователем.
                </p>
              </section>

              <section>
                <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                  7. Меры по защите персональных данных
                </h3>
                <p>
                  Оператор принимает необходимые правовые, организационные и технические меры для защиты персональных 
                  данных от неправомерного доступа, уничтожения, изменения, блокирования, копирования, предоставления, 
                  распространения, а также от иных неправомерных действий в отношении персональных данных.
                </p>
                <p>К таким мерам относятся:</p>
                <ul className="list-disc list-inside ml-4 space-y-1">
                  <li>Использование современных систем шифрования данных</li>
                  <li>Ограничение доступа к персональным данным</li>
                  <li>Контроль действий с персональными данными</li>
                  <li>Обнаружение фактов несанкционированного доступа к персональным данным</li>
                  <li>Восстановление персональных данных, модифицированных или уничтоженных вследствие несанкционированного доступа</li>
                </ul>
              </section>

              <section>
                <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                  8. Передача персональных данных третьим лицам
                </h3>
                <p>
                  Оператор не передаёт персональные данные третьим лицам, за исключением случаев, предусмотренных 
                  законодательством Российской Федерации.
                </p>
                <p>
                  Персональные данные могут быть переданы уполномоченным органам государственной власти Российской Федерации 
                  только по основаниям и в порядке, установленным законодательством Российской Федерации.
                </p>
                <p>
                  Для обеспечения работы Приложения используются сторонние сервисы (Supabase), которые могут обрабатывать 
                  персональные данные в соответствии с их политиками конфиденциальности.
                </p>
              </section>

              <section>
                <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                  9. Права субъекта персональных данных
                </h3>
                <p>Пользователь имеет право:</p>
                <ul className="list-disc list-inside ml-4 space-y-1">
                  <li>Получать информацию, касающуюся обработки его персональных данных</li>
                  <li>Требовать уточнения персональных данных, их блокирования или уничтожения</li>
                  <li>Отозвать согласие на обработку персональных данных</li>
                  <li>Обжаловать действия или бездействие Оператора в уполномоченный орган по защите прав субъектов персональных данных или в судебном порядке</li>
                  <li>Получать информацию о сроках хранения персональных данных</li>
                  <li>Требовать уведомления всех лиц, которым ранее были сообщены неверные или неполные персональные данные, обо всех произведённых в них исключениях, исправлениях или дополнениях</li>
                </ul>
              </section>

              <section>
                <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                  10. Cookies и аналогичные технологии
                </h3>
                <p>
                  Приложение может использовать технологии cookies и аналогичные технологии для улучшения работы сервиса, 
                  персонализации контента и анализа использования Приложения.
                </p>
                <p>
                  Пользователь может настроить свой браузер для отказа от cookies, однако это может повлиять на функциональность Приложения.
                </p>
              </section>

              <section>
                <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                  11. Изменение Политики конфиденциальности
                </h3>
                <p>
                  Оператор оставляет за собой право вносить изменения в настоящую Политику конфиденциальности. 
                  Новая редакция Политики вступает в силу с момента её размещения в Приложении, если иное не предусмотрено новой редакцией Политики.
                </p>
                <p>
                  Продолжение использования Приложения после внесения изменений означает согласие пользователя с новой редакцией Политики.
                </p>
              </section>

              <section>
                <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                  12. Контактная информация
                </h3>
                <p>
                  По всем вопросам, связанным с обработкой персональных данных, пользователь может обратиться 
                  к Оператору через форму обратной связи в Приложении или по электронной почте, указанной в Приложении.
                </p>
              </section>

              <section>
                <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                  13. Заключительные положения
                </h3>
                <p>
                  Настоящая Политика конфиденциальности разработана в соответствии с требованиями Федерального закона 
                  от 27.07.2006 № 152-ФЗ «О персональных данных» и иных нормативных правовых актов Российской Федерации, 
                  определяющих требования к защите персональных данных.
                </p>
                <p>
                  Все отношения, связанные с обработкой персональных данных и не урегулированные настоящей Политикой, 
                  подчиняются действующему законодательству Российской Федерации.
                </p>
              </section>
            </div>
          </div>
        </div>

        {/* Footer */}
        <div className="px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end">
          <button
            onClick={onClose}
            className="px-6 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors"
          >
            Закрыть
          </button>
        </div>
      </div>
    </div>
  );
};

export default PrivacyPolicyModal;

