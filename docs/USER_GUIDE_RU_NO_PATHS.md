# ПОТОК — полное описание проекта и работы приложения

Этот документ описывает, как устроен проект ПОТОК, как работает приложение, какие разделы есть и как ими пользоваться. В тексте нет внутренних путей и технических ссылок.

---

## 1) Что это за проект

ПОТОК — приложение для персонального здоровья и привычек, которое объединяет:
- учет питания и анализ макросов,
- дневник тренировок,
- трекер привычек,
- мониторинг прогресса,
- постановку целей по телу и питанию,
- ежедневный план и рекомендации,
- поддержку и уведомления,
- AI‑коуча с объяснимостью решений.

Приложение помогает выстроить ритм: фиксировать питание и тренировки, наблюдать прогресс, получать рекомендации и мягкую поддержку.

---

## 2) Общая логика работы

Приложение построено вокруг регулярных записей пользователя:
- питание (что и сколько съел),
- тренировки (упражнения, подходы, веса),
- привычки (отметки выполнения),
- замеры (изменения тела и фото),
- цели и прогресс.

На основе этих данных формируются тренды, дневные планы и рекомендации. AI‑коуч использует контекст прогресса, чтобы давать понятные, неагрессивные советы и объяснять свои решения.

Данные сохраняются в основном хранилище, а часть — в локальном кэше для скорости и офлайн‑режима.

---

## 3) Навигация и структура

В приложении есть базовые разделы:
- Главный экран с карточками функций.
- Профиль и настройки.
- Цели.
- Замеры.
- Питание.
- Тренировки.
- Привычки.
- Прогресс.
- Сегодня (план дня).
- Моя программа.
- Уведомления.
- Подписка (Premium).
- История коуча.
- Админ‑панель (для администраторов).

Большинство страниц имеют кнопку закрытия (крестик), которая возвращает на главный экран.

---

## 4) Главный экран

Главный экран — стартовая точка приложения.

### Что вы видите
- Приветствие пользователя.
- Кнопка бокового меню.
- Карточки основных разделов.

### Как это работает
- Нажатие на карточку открывает соответствующий раздел.
- Premium‑разделы помечены, но доступны для просмотра.
- Пользователи‑администраторы автоматически попадают в админ‑панель.

---

## 5) Боковое меню

Меню открывается кнопкой в правом верхнем углу.

### Разделы меню
- Профиль.
- Уведомления (показывает индикатор непрочитанных).
- Общие настройки (открывает модальное окно).
- Поддержка (форма обращения).
- Поделиться с друзьями (кнопка без перехода).
- Выход из аккаунта.

---

## 6) Авторизация

### Вход
- Введите email или телефон.
- Нажмите «Получить код».
- Введите код из SMS или перейдите по ссылке из email.
- После входа вы окажетесь на главном экране.

### Регистрация
- Заполните имя и контакт.
- Получите код подтверждения.
- После подтверждения вы войдете в приложение.

### Восстановление пароля
- Укажите email и получите ссылку восстановления.

---

## 7) Профиль

Профиль объединяет личные данные, подписку и настройки коуча.

### Что можно сделать
- Изменить аватар.
- Просмотреть данные профиля.
- Управлять подпиской и историей платежей.
- Изменить пароль.
- Открыть политику конфиденциальности.
- Настроить AI‑коуча и голосовые параметры.
- Открыть историю рекомендаций коуча.

---

## 8) Цели

Раздел целей помогает рассчитать калории и макросы под вашу задачу.

### Логика
- Вводите параметры (пол, возраст, рост, вес, уровень активности).
- Выбираете цель (снижение веса, набор, поддержание).
- Получаете расчет калорий и БЖУ.
- Можно сохранить цель и пересчитывать при изменении данных.

---

## 9) Замеры

Раздел для отслеживания физических параметров и фото.

### Возможности
- Ввод замеров (вес, шея, плечи, грудь, спина).
- Добавление собственных параметров.
- Загрузка фото (несколько ракурсов).
- История замеров и фото.

---

## 10) Питание

Дневник питания — один из ключевых разделов.

### Основные возможности
- Выбор даты и просмотр дневника.
- Приемы пищи: завтрак, обед, ужин, перекус.
- Добавление продуктов и блюд.
- Анализ состава и макросов.
- Отметка «съедено».
- Заметки к приему пищи.

### Действия с приемами пищи
- Добавление продуктов.
- Копирование приема пищи на другую дату.
- Удаление приема пищи.
- Сохранение приема пищи как рецепта.

---

## 11) Поиск продуктов

Раздел поиска помогает быстро найти продукт и добавить его в дневник.

### Возможности
- Поиск по названию.
- Сканирование штрих‑кода.
- Добавление продукта с указанием веса.
- Список часто используемых продуктов.

Часто используемые продукты сохраняются локально и доступны для быстрого добавления.

---

## 12) Анализатор рецепта

Раздел позволяет вставить текст рецепта и получить состав:
- анализ ингредиентов,
- расчет калорий и макросов,
- сохранение рецепта в библиотеку,
- добавление рецепта в дневник.

---

## 13) Рецепты

Библиотека рецептов хранит:
- личные рецепты,
- избранные,
- общую библиотеку.

### Возможности
- фильтры по типу и цели,
- просмотр рецепта,
- пересчет макросов на любой вес порции,
- добавление в дневник.

---

## 14) Создание продуктов

Можно создать свой продукт:
- задать название и пищевую ценность,
- сохранить в избранное,
- сразу добавить в дневник.

Есть также вариант брендового продукта с указанием марки.

---

## 15) Избранные продукты

Раздел показывает часто используемые продукты:
- можно быстро выбрать продукт,
- открыть его с предзаполненным весом,
- добавить в дневник за пару нажатий.

---

## 16) Тренировки

Раздел для планирования и учета тренировок.

### Возможности
- выбор даты,
- выбор категорий упражнений,
- добавление упражнений,
- настройка подходов, повторений и веса,
- сохранение тренировки.

Данные сохраняются в основном хранилище и кэшируются локально.

---

## 17) Привычки

Раздел для трекинга регулярных действий.

### Возможности
- создание привычек,
- отметка выполнения,
- статистика серий,
- навигация по дням.

AI‑коуч реагирует на завершение и срывы привычек.

---

## 18) Прогресс

Раздел объединяет ключевые метрики за период:
- тренды веса,
- динамика тренировок,
- питание и соблюдение целей.

Есть быстрые переходы в разделы «Сегодня», «Моя программа», «Привычки», «Замеры».

---

## 19) Сегодня

Экран «Сегодня» показывает план дня:
- калории и макросы,
- план тренировок,
- привычки,
- подсказки коуча и состояние восстановления.

---

## 20) Моя программа

Показывает структуру плана по неделям и фазам.

### Возможности
- видеть статус каждого дня,
- пауза/возобновление программы,
- перепланировка при необходимости.

---

## 21) Подписка (Premium)

Раздел подписки показывает:
- текущий статус (free/trial/active/grace/expired),
- преимущества Premium,
- мягкие подсказки без давления.

---

## 22) Уведомления

Раздел уведомлений содержит:
- поддержку,
- сообщения,
- новости.

Можно отмечать прочитанными, удалять и восстанавливать из корзины.

---

## 23) История коуча

Раздел показывает:
- историю решений коуча,
- объяснимость рекомендаций,
- изменение доверия со временем.

Также можно очистить историю и сбросить стиль общения.

---

## 24) Админ‑панель

Доступна только администраторам.

### Возможности
- статистика пользователей,
- управление сообщениями поддержки,
- назначение/снятие прав администратора,
- сервисные операции.

---

## 25) Pose Coach (тренер поз)

Раздел для анализа движений:
- использует камеру и анализ позы,
- отображает подсказки и риск‑статусы,
- в реальном времени работает в зависимости от подписки.

---

## 26) Импорт упражнений

Сервисный экран импорта:
- автоматически запускает загрузку базы упражнений,
- показывает статус процесса,
- позволяет повторить попытку при ошибке.

---

## 27) Где хранятся данные

### Основное хранилище
- профили, цели, питание, тренировки, привычки, уведомления.

### Локальный кэш
- используется для быстрого отображения и офлайн‑режима.

---

## 28) Состояния загрузки и ошибок

В приложении есть состояния:
- загрузка,
- нет данных,
- ошибка,
- офлайн.

В таких случаях доступны кнопки повторной попытки.

---

## 29) Коуч и объяснимость

AI‑коуч:
- отправляет поддерживающие сообщения,
- помогает мягко возвращаться в ритм,
- объясняет, почему предлагает тот или иной шаг.

---

## 30) Быстрая логика «если нажать — что будет»

- Крестик на большинстве экранов возвращает на главный.
- Карточки на главной открывают соответствующие разделы.
- В питании можно быстро перейти в поиск, рецепты или создание продукта.
- В прогрессе есть переходы на «Сегодня», «Программу», «Привычки» и «Замеры».

---

## 31) Детальные сценарии: Питание

### 31.1 Добавить продукт → сохранить → отметить «съедено»
1. Откройте дневник питания и выберите дату.
2. Откройте нужный прием пищи (завтрак/обед/ужин/перекус).
3. Нажмите кнопку добавления продукта.
4. Выберите продукт через поиск или сканер.
5. В модальном окне укажите вес и подтвердите.
6. Продукт появляется в списке приема пищи и в дневной сумме.
7. Нажмите на иконку отметки у продукта — статус «съедено» включится.

### 31.2 Поиск продуктов (экран поиска)
- Поле поиска позволяет найти продукт по названию.
- Есть быстрый переход к сканеру штрих‑кода.
- Выбор продукта открывает модальное окно добавления.
- После подтверждения продукт автоматически добавляется в текущий прием пищи.

### 31.3 Модальные окна в питании
- **Добавление продукта**: вес, единицы, подтверждение.
- **Сканер штрих‑кода**: распознавание, подтверждение найденного продукта.
- **Анализ фото еды**: загрузка/съемка, анализ и добавление в дневник.
- **Анализ рецепта**: ввод текста, расчет состава, сохранение в дневник.
- **Редактирование записи**: изменение веса и макросов.
- **Копирование приема пищи**: выбор даты и подтверждение.
- **Удаление приема пищи**: подтверждение удаления.
- **Заметка к приему пищи**: текст заметки и сохранение.
- **Сохранить как рецепт**: превращает прием пищи в рецепт в библиотеке.

---

## 32) Детальные сценарии: Рецепты

### 32.1 Анализатор рецепта (пошагово)
1. Введите название рецепта (по желанию).
2. Вставьте список ингредиентов текстом.
3. Нажмите «Анализировать» — отобразятся ингредиенты и макросы.
4. Нажмите «Сохранить в рецепты» или «Добавить в дневник».

### 32.2 Детали рецепта
- Можно изменить вес порции: макросы пересчитываются автоматически.
- Можно добавить рецепт в дневник, выбрав прием пищи и дату.
- Можно добавить фото рецепта и заметку.

---

## 33) Детальные сценарии: Тренировки

### 33.1 Добавить тренировку
1. Откройте раздел тренировок и выберите дату.
2. Нажмите «Добавить упражнение».
3. Выберите категорию → упражнение.
4. Отредактируйте подходы/повторы/вес.
5. Сохраните тренировку — данные попадут в дневник.

### 33.2 Создать свое упражнение
- В списке упражнений нажмите «Создать».
- Заполните название и сохраните.
- Новое упражнение появится в списке и будет доступно для выбора.

### 33.3 Завершение дня
- После сохранения тренировки день считается заполненным.
- Система использует данные для аналитики и планирования.

---

## 34) Детальные сценарии: Привычки

### 34.1 Создать привычку
1. Откройте раздел привычек.
2. Нажмите «Создать привычку».
3. Укажите название, описание (опционально), частоту.
4. Сохраните — привычка появится в списке.

### 34.2 Отметить выполнение
- Нажмите на иконку выполнения рядом с привычкой.
- Статус обновится, серия и статистика пересчитаются.

---

## 35) Детальные сценарии: Цели и прогресс

### 35.1 Создать цель
1. Заполните данные (пол, возраст, рост, вес, активность).
2. Выберите цель (снижение/набор/поддержание).
3. Получите расчет калорий и БЖУ.
4. Сохраните — цель будет использоваться в дневниках.

### 35.2 Прогресс
- Прогресс учитывает питание, тренировки, замеры, привычки.
- Визуальные тренды строятся на 30‑дневном периоде.

---

## 36) Детальные сценарии: Замеры и фото

### 36.1 Добавить замеры
1. Откройте раздел замеров.
2. Введите значения или используйте кнопки «+ / -».
3. Сохраните — замеры появятся в истории.

### 36.2 Добавить фото
- Нажмите на ячейку фото и выберите файл.
- Фото сохраняются и показываются в истории.

---

## 37) Детальные сценарии: Уведомления

### 37.1 Работа с уведомлениями
- Вкладки разделяют поддержку, сообщения и новости.
- Можно помечать как прочитанные.
- Можно перемещать в корзину и восстанавливать.

---

## 38) Детальные сценарии: Профиль и настройки

### 38.1 Аватар
- Нажмите на фото профиля, выберите изображение.
- Аватар обновится сразу и сохранится.

### 38.2 Настройки коуча
- Можно включать/выключать коуча.
- Можно настроить голос и стиль подсказок.

---

## 39) Детальные сценарии: Сегодня и Моя программа

### 39.1 Сегодня
- Экран показывает план дня и актуальные подсказки.
- Можно запросить коуча вручную.

### 39.2 Моя программа
- Отображается структура недель и фаз.
- Можно приостанавливать или перепланировать программу.

---

## 40) Админ‑панель (для администраторов)

### 40.1 Пользователи и статистика
- Видна общая статистика пользователей и активности.

### 40.2 Поддержка
- Можно отвечать на сообщения пользователей.
- Можно отслеживать статусы обращений.


